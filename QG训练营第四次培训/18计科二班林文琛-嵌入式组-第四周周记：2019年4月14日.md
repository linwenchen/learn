# QG训练营嵌入式组第四周周记：2019年4月14日

## 生活随记

2019.4.8(星期一)

今天星期一，前天晚上看了中期考核要求----做一个图书管理系统，花了几小时，打出来了一个链表和配套函数，但是今天一细看要求，要存储书籍信息，还有借阅学生信息等等，这说明当我再次打开此程序的时候，要从我上一次关闭的状态继续。我猜到应该是需要应用到文件输入输出了。然后需要记录借阅学生的的归还期限，那么应该需要用到一个时间函数。所以昨天写的都没用了。。。翻车，而且这些我都不太了解，只能边学边写了。小组培训推迟到了星期二，于是我翻出了cpp和c指针开始了我的爆肝大计。

不出意外，这个星期可能面临中期考核，小组作业，大组作业三面围攻，(+_+)?，还有小组作业是做蔡徐坤打球视频？？？这上手就是这种难度的吗？？？我很方啊！。。。

没有写过系统的经验以及最大代码量从没有超过300行的垃圾实力加上上手感觉到的重重困难，我知道闭门造车一定会让我钻牛角尖里出不来，所以机智的百度了一下万能网友做的图书管理系统，看了他们在程序中如何使用文件以及学习他们图书管理系统的整体的结构。看了一晚上大概理解了一点点文件输入输出，数据结构上采用**链表**应该是没有问题的。我需要做的就是把我已经写好的链表和文件输入输出结合起来，使我昨天写的代码发挥点预热，然后再构建其他函数，我想了一下，需要用到文件输入输出的地方有： **书信息的存储**， **借阅学生信息的存储**，还有 **预定学生信息的存储**。因为借阅和预定都是和对应书籍相关的，所以我把包含书信息的结构体作为最大的数据类型BOOK，然后把其他两个也作为数据类型(队列结构)，然后把他们的头指针放在BOOK中，这样就解决了结合问题。现在我只需要以二进制的方式，将这三个结构类型分别存放放在三个文件里就可以了，于是开始了我的图书管理系统的第一步！

练习文件的输入输出操作。是的，你没有看错。。。



2019.4.9(星期二)

今天最开心的事情就是只有一节课，最不开心的事情是明天有足够多的课，在预习高数和做中期考核作业中，我选择了后者。。。没办法，拖不了呀(T_T)。继续练习我的文件输入输出操作，熟悉我可能会用到的fopen(),fclose(),fwrite(),fread(),fgetc(),ungetc()等等以及各种模式，当然。。。我还是无法避免的掉坑了。。。~~心情简单~~

然后还有就是今天的第三次小组培训，介绍了一些单片机的知识还有一些仿真软件的使用，还有为了照顾我们，把小组作业延期了，当然蔡徐坤是不可能的，要求能用单片机来发出声音（放歌），emmm，怎么可能按你们的想法搞蔡徐坤呢！好不容易有自由发挥的机会，看看有没有时间，搞个别的，嘿嘿。

掉的第一个坑，feof()函数好像没有起作用？

> 第一个坑：feof()的用法

> https://blog.csdn.net/konghouy/article/details/80530937

诶，好惨呀，三点了，为了明天的高数，还是要睡一下的。

2019.4.10(星期三)

在几乎满课加选修的情况下，我在夹缝中寻找打码的时机，首先是解决昨天的问题，成功把文件输入输出搞定，然后开始写主要函数，借用网友相对好看点的界面，初步构建了框架。然后。。。我又掉坑了。。。

在弄时间的时候，很简单地找到了获取当前时间的方法，但是如何获得未来的某个时间呢？我的第一个想法是利用<time.h> 里面的tm结构体，然后转换，但是失败了，因为tm的成员tm_mon等等，虽然存储的是对应的年月日时分秒，但是往对应成员上加值，会导致得到错误的时间，而且月份的不同（2月28、29）这些也不能自动转化。还有其月份是 **当前月份-1**，其年份是  **当前年份-1900**，也就是从1900开始计时。既然利用tm结构体失败了，那我就只能用time_t了，通过往当前时间的以秒为单位的time_t上加秒数，以此得到未来的时间。问题解决。

2019.4.11(星期四)

今天份bug。。。awsl。



> 第一个坑：**fread 和 fwrite 用反了**

　　1.fread函数原型

```c
size_t fread ( void * ptr, size_t size, size_t count, FILE * stream );
//ptr：指向保存结果的指针；size：每个数据类型的大小；
//count：数据的个数；stream：文件指针
//函数返回读取数据的个数
```

　　2.fwrite函数原型

```c
size_t fwrite ( const void * ptr, size_t size, size_t count, FILE * stream );
//ptr：指向保存数据的指针；size：每个数据类型的大小；
//count：数据的个数；stream：文件指针
//函数返回写入数据的个数
```

　　　　   

![1555093814812](C:\Users\林文琛\AppData\Roaming\Typora\typora-user-images\1555093814812.png)

没有报错，可怜的我只能断点调试，在另外一个项目可以正常写入以及在这个项目无限返回值为0中自闭（fread fwrite 返回成功读取的项目数，也就是第三个参数），然后在今晚贴到群里问师兄后才偶然发现。。。用错了。

2019.4.12(星期五)

不知不觉都星期五了。。。运行问题基本解决，接下来就是改界面还有要不要加需求了。。

今晚大组培训讲算法，emmmm,我前排真的都有点听不清⊙﹏⊙∥，算了，回去看ppt，emmm,这什么呀，颜色算法？用前后指针排序，还行，虽然写起来麻烦点，但是只用for一层，对那种特别大的数据就很有优势。算了，先把界面弄好先。

2019.4.13(星期六)

肝了一天排序，本来还打算弄个log的，但是看了不行了，我这个星期的作业都没动，再不写下个星期可能就脱节了。。。诶，好气呀。PPT和说明文档也还没写，菜爆了我。。。

2019.4.14(星期日)

今天爆肝一天写文档，PPT还没弄好，真是糟心，作业也没做，要哭辽。。。不过总算把大部分的作业搞定了。

## 一周总结

这周很充实，学到的东西很多，文件输入输出和时间函数，都是我以前没有过多接触的，也算是从0开始，排序函数，也是从零开始，虽然已经理解了那几个排序算法原理，但是这种算法是很容易出错的，尤其是对其他类型排序，或者更改排序顺序，如果不熟练，不细心，还是会错，一个有错的算法，还比不上一个O（n^2）的冒泡算法，起码冒泡不容易写错。

第一次写系统，第一次写代码上千行，第一次emmm，也不算第一次吧，一个星期天天三点。。。诶，我总算理解康乐组的存在意义了。

## 存在问题

问题很多，c语言的，单片机的，课程的，都有。只能靠我用时间来补了。~~心情简单~~

## 下周规划

1.做完小组作业

2.弄好PPT

3.文化课跟上脚步

4.准备考试

5.学有余力，弄弄板子，把c学深入一点